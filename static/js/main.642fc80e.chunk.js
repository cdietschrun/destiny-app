(this["webpackJsonpdestiny-app"]=this["webpackJsonpdestiny-app"]||[]).push([[0],{19:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},23:function(e,t,n){e.exports=n(48)},28:function(e,t,n){},30:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),c=n(17),r=n.n(c),s=(n(28),n(10)),l=n.n(s),i=n(18),u=n(13),p=n(19),m=n.n(p),d=(n(30),n(21)),f=n(1),h=n(20);function g(e){return o.useEffect((function(){!function(e){console.log(e),console.log("yo were here");var t=h.parse(e.location.search);console.log(t.code),localStorage.setItem("token",t.code)}(e)}),[]),o.createElement("div",null,o.createElement("h2",null,"About"))}var w=function(){var e=Object(o.useState)(""),t=Object(u.a)(e,2),n=t[0],a=(t[1],Object(o.useState)({})),c=Object(u.a)(a,2),r=c[0],s=c[1];function p(e){return Object.keys(e).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))})).join("&")}function h(){return(h=Object(i.a)(l.a.mark((function e(){var t,n,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("in data"),console.log(localStorage.getItem("token")),t={grant_type:"authorization_code",code:localStorage.getItem("token"),client_id:"34288"},e.next=5,fetch("https://www.bungie.net/Platform/App/OAuth/Token/",{method:"post",body:p(t),headers:{"Content-Type":"application/x-www-form-urlencoded","X-API-Key":"770e0255cb284f568b68f77514c80dbe"}}).then((function(e){return e.json()}));case 5:return n=e.sent,console.log(n),localStorage.setItem("access_token",n.access_token),e.next=10,fetch("https://www.bungie.net/Platform/User/GetCurrentBungieNetUser/",{headers:{"X-API-Key":"770e0255cb284f568b68f77514c80dbe",Authorization:"Bearer "+n.access_token}}).then((function(e){return e.json()}));case 10:o=e.sent,console.log(o),s(o.Response);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return o.useEffect((function(){!function(){h.apply(this,arguments)}()}),[n]),o.createElement(d.a,null,o.createElement("div",{className:"App"},o.createElement("header",{className:"App-header"},o.createElement("img",{src:m.a,className:"App-logo",alt:"logo"}),o.createElement("a",{href:"https://www.bungie.net/en/OAuth/Authorize?client_id=34288&response_type=code"},"Click here to auth"),o.createElement("p",null,"Destiny stuff Edit ",o.createElement("code",null,"src/App.js")," and save to reload."),void 0!==r&&[o.createElement("p",null,"Xbox username: ",r.xboxDisplayName," "),o.createElement("p",null,"PSN username: ",r.psnDisplayName)],o.createElement("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer"},"Learn React")),o.createElement(f.a,{path:"/destiny-app/authdone",component:g})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.642fc80e.chunk.js.map